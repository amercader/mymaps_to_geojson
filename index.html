<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Google MyMaps to GeoJSON</title>
    <style>
      body {
        font-family: sans-serif;
      }
      main {
        max-width: 630px;
        margin: 3em auto;
      }
      .btn {
        display: inline-block;
        padding: .5em 1em;
        border-radius: 4px;
        border: 1px solid;
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Google MyMaps to GeoJSON</h1>

      <p>A small script to export data displayed in Google MyMaps as a GeoJSON file, that can be used as a <a href="https://en.wikipedia.org/wiki/Bookmarklet">bookmarklet</a>.</p>

      <h2>How to use it</h2>

      <p>Drag the button below to the bookmarks toolbar in your browser:</p>

      <a class="btn" href="javascript:(function()%7B_layers%3DJSON.parse(_pageData)%5B1%5D%5B6%5D%2C_features%3D%5B%5D%2C_layers.forEach((e%3D%3E_features.push(...e%5B12%5D%5B0%5D%5B13%5D%5B0%5D.map((t%3D%3E(f%3D%7Btype%3A%22Feature%22%2Cgeometry%3A%7Btype%3A%22Point%22%2Ccoordinates%3A%5Bt%5B1%5D%5B0%5D%5B0%5D%5B1%5D%2Ct%5B1%5D%5B0%5D%5B0%5D%5B0%5D%5D%7D%2Cproperties%3A%7B%7D%7D%2Cf.properties%5Bt%5B5%5D%5B0%5D%5B0%5D%5D%3Dt%5B5%5D%5B0%5D%5B1%5D%5B0%5D%2C_layers.length%3E1%26%26e%5B2%5D%26%26(f.properties.layer%3De%5B2%5D)%2Ct%5B5%5D%5B3%5D.forEach((e%3D%3E%7Bf.properties%5Be%5B0%5D%5D%3De%5B1%5D%5B0%5D%7D))%2Cf))))))%2Cout%3D%7Btype%3A%22FeatureCollection%22%2Cfeatures%3A_features%7D%2CoutText%3DJSON.stringify(out)%2Cwindow.prompt(%22GeoJSON%20file%20created%20(%22%2B_features.length%2B%22%20features)%5Cn%5CnCopy%20to%20clipboard%20with%20Ctrl%2BC%20%2F%20Cmd%2BC%5Cn%5Cn%22%2CoutText)%3B%7D)()">MyMaps to GeoJSON</a>

    <h2>Caveats</h2>

    <ul>
      <li>This relies on undocumented internal variables which are bound to change or disappear at any time</li>
      <li>Only points are currently supported (no lines or polygons)</li>
    </ul>

    <h2>Source code</h2>

    <a href="https://github.com/amercader/mymaps_to_geojson">https://github.com/amercader/mymaps_to_geojson</a>


    </main>
  </body>
</html>
