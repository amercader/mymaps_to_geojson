<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta property="og:image" content="https://opengraph.githubassets.com/78be6b07eb39fae0c2107d9aa66428fbbfa41401136ccfe79181e7af2ead009c/amercader/mymaps_to_geojson" />
    <meta property="og:image:alt" content="A bookmarklet to export data displayed in Google MyMaps as a GeoJSON file - amercader/mymaps_to_geojson: A bookmarklet to export data displayed in Google MyMaps as a GeoJSON file" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="600" />
    <meta property="og:site_name" content="GitHub" />
    <meta property="og:type" content="object" />
    <meta property="og:title" content="amercader/mymaps_to_geojson: A bookmarklet to export data displayed in Google MyMaps as a GeoJSON file" />
    <meta property="og:url" content="https://amercader.github.io/mymaps_to_geojson/" />
    <meta property="og:description" content="A bookmarklet to export data displayed in Google MyMaps as a GeoJSON file - amercader/mymaps_to_geojson: A bookmarklet to export data displayed in Google MyMaps as a GeoJSON file" />

    <title>Google MyMaps to GeoJSON</title>
    <style>
      body {
        font-family: sans-serif;
      }
      main {
        max-width: 630px;
        margin: 3em auto;
      }
      .btn {
        display: inline-block;
        margin: 20px 0;
        padding: .5em 1em;
        border-radius: 4px;
        border: 1px solid;
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Google MyMaps to GeoJSON</h1>

      <p>A small script to export data displayed in Google MyMaps as a GeoJSON file, that can be used as a <a href="https://en.wikipedia.org/wiki/Bookmarklet">bookmarklet</a>.</p>

      <h2>How to use it</h2>

      <ol>
        <li>Drag the button below to the bookmarks toolbar in your browser:

        <a class="btn" href="javascript:(function()%7Bfunction%20main()%7B%22undefined%22!%3Dtypeof%20_pageData%3F(_layers%3DJSON.parse(_pageData)%5B1%5D%5B6%5D%2C_features%3D%5B%5D%2C_layers.forEach((e%3D%3E_features.push(...e%5B12%5D%5B0%5D%5B13%5D%5B0%5D.map((t%3D%3E%7Bif(t%5B1%5D%5B0%5D)return%20f%3D%7Btype%3A%22Feature%22%2Cgeometry%3A%7Btype%3A%22Point%22%2Ccoordinates%3A%5Bt%5B1%5D%5B0%5D%5B0%5D%5B1%5D%2Ct%5B1%5D%5B0%5D%5B0%5D%5B0%5D%5D%7D%2Cproperties%3A%7B%7D%7D%2Cf.properties%5Bt%5B5%5D%5B0%5D%5B0%5D%5D%3Dt%5B5%5D%5B0%5D%5B1%5D%5B0%5D%2C_layers.length%3E1%26%26e%5B2%5D%26%26(f.properties.layer%3De%5B2%5D)%2Ct%5B5%5D%5B3%5D.forEach((e%3D%3E%7Bf.properties%5Be%5B0%5D%5D%3De%5B1%5D%5B0%5D%7D))%2Cf%7D)))))%2Cout%3D%7Btype%3A%22FeatureCollection%22%2Cfeatures%3A_features%7D%2CoutText%3DJSON.stringify(out)%2Cwindow.prompt(%22GeoJSON%20file%20created%20(%22%2B_features.length%2B%22%20features)%5Cn%5CnCopy%20to%20clipboard%20with%20Ctrl%2BC%20%2F%20Cmd%2BC%5Cn%5Cn%22%2CoutText))%3Awindow.alert(%22Sorry%2C%20no%20map%20data%20found%22)%7Dmain()%3B%7D)()">MyMaps to GeoJSON</a>
        </li>

        <li>Go to a Google MyMaps page <a href="https://www.google.com/maps/d/u/0/viewer?mid=109EbmrwJdXAIiMDon41eU0fhZcxy_Goa&amp;ll=41.71100546427104%2C1.3052930867187307&amp;z=8">like this one</a> and click on the bookmark. You should get a dialog with the generated GeoJSON string, which you can copy and paste to your favourite editor.</li>

      </ol>

    <h2>Caveats</h2>

    <ul>
      <li>This relies on undocumented internal variables which are bound to change or disappear at any time</li>
      <li>Only points are currently supported (no lines or polygons)</li>
    </ul>

    <h2>Source code</h2>

    <a href="https://github.com/amercader/mymaps_to_geojson">https://github.com/amercader/mymaps_to_geojson</a>


    </main>
  </body>
</html>
